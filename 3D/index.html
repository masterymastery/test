<html>

<head>
    <title>My first three.js app</title>
    <style>
        body {
            margin: 0;
        }

        canvas {
            width: 100%;
            height: 100%
        }
    </style>
</head>

<body>
    <script src="./lib/three.js"></script>
    <script src="./lib/glTFloader.js"></script>
    <script src="./lib/OrbitControls.js"></script>
    <script>
        var scene = new THREE.Scene();


        var renderer = new THREE.WebGLRenderer();
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.toneMapping = THREE.ReinhardToneMapping;
        renderer.toneMappingExposure = 3
        document.body.appendChild(renderer.domElement);


        const as = window.innerWidth / window.innerWidth
        var camera = new THREE.PerspectiveCamera(75, as, 0.01, 1000);
        camera.rotation.y = (20 / 180) * Math.PI;
        camera.position.set(200, 50, 20)

        //  const hemiLight = new THREE.HemisphereLight(0xffeeb1, 0x080820, 5)
        const hemiLight = new THREE.HemisphereLight(0xffffbb, 0x080820, 1);
        const amLight = new THREE.AmbientLight(0x404040);
        var light = new THREE.AmbientLight(0x404040); // soft white light
        scene.add(hemiLight)

        const controls = new THREE.OrbitControls(camera, renderer.domElement);
        controls.addEventListener('change', renderer)


        const loader = new THREE.GLTFLoader()
        loader.load("model/draft-_sci-fi_toad_coursework_xyz_school/scene.gltf", (gltf) => {
            // scene.add(res.scene)
            // renderer.render(scene, camera)
            // animate()
            gltf.scene.name = '3dmodel';
            gltf.scene.traverse(function (child) {
                if (child.isMesh) {
                    child.frustumCulled = false;
                    //模型阴影
                    child.castShadow = true;
                    //模型自发光
                    child.material.emissive = child.material.color;
                    child.material.emissiveMap = child.material.map;
                }
            })
            console.log()
            // this.setContent(gltf.scene);
            // scene.add(gltf.scene);
            scene.add(gltf.scene)
            // renderer.render(scene, camera)
            animate()
        })

        const animate = () => {
            renderer.render(scene, camera)
            requestAnimationFrame(animate)
        }

    </script>
</body>

</html>